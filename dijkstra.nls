extensions [nw matrix]
links-own [weight]
  

to-report dijkstra [ s d ]
  
  if s = d [ report (list s s ) ]
  
  nw:set-context bus_stops routes
  
  let path 0
  let point 0
  
  let start-halte ""
  let end-halte ""
  let start-point ""
  let end-point ""
  
  let path-list []
  let path-index-list []
  
  set path-list lput item s amsterdam_bus_stops_names path-list
  
  ask bus_stop s [set path nw:path-to bus_stop d  ]
  
  show path
  
  foreach path [ let sub-path ? 
    ask sub-path [set start-point end1
      set end-point end2 
    ]
    ask start-point [set start-halte name]
    ask end-point [set end-halte name]
    
    if not member? start-halte path-list [ set path-list lput start-halte path-list]
    if not member? end-halte path-list [ set path-list lput end-halte path-list ]
  ]
  
  foreach path-list [
    let index position ? amsterdam_bus_stops_names
    set path-index-list lput index path-index-list
  ]
  
  report path-index-list

end


